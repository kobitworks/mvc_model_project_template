<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}aie-code sample{% endblock %}</title>
  <link rel="stylesheet" href="./css/base.css">
  {% block head %}{% endblock %}
</head>
<body>
  <header class="site-header">
    {% block header %}
    <h1 class="site-title">aie-code sample</h1>
    {% endblock %}
  </header>

  <nav class="site-nav">
    {% block nav %}
    <ul>
      {% for item in nav %}
        <li{% if item.children|length %} class="dropdown"{% endif %}>
          {% if item.controller %}
            {% set full = item.namespace ? item.namespace ~ '/' ~ item.controller : item.controller %}
            {% if full == default_class %}
              <a href="./">{{ item.name|e }}</a>
            {% else %}
              <a href="./?c={{ item.controller }}{% if item.namespace %}&n={{ item.namespace }}{% endif %}">{{ item.name|e }}</a>
            {% endif %}
          {% else %}
            <a href="#">{{ item.name|e }}</a>
          {% endif %}
          {% if item.children|length %}
            <ul class="dropdown-menu">
              {% for child in item.children %}
                <li{% if child.children|length %} class="dropdown"{% endif %}>
                  {% if child.controller %}
                    {% set full_child = child.namespace ? child.namespace ~ '/' ~ child.controller : child.controller %}
                    {% if full_child == default_class %}
                      <a href="./">{{ child.name|e }}</a>
                    {% else %}
                      <a href="./?c={{ child.controller }}{% if child.namespace %}&n={{ child.namespace }}{% endif %}">{{ child.name|e }}</a>
                    {% endif %}
                  {% else %}
                    <a href="#">{{ child.name|e }}</a>
                  {% endif %}
                  {% if child.children|length %}
                    <ul class="dropdown-menu">
                      {% for grandchild in child.children %}
                        <li>
                          {% if grandchild.controller %}
                            {% set full_grand = grandchild.namespace ? grandchild.namespace ~ '/' ~ grandchild.controller : grandchild.controller %}
                            {% if full_grand == default_class %}
                              <a href="./">{{ grandchild.name|e }}</a>
                            {% else %}
                              <a href="./?c={{ grandchild.controller }}{% if grandchild.namespace %}&n={{ grandchild.namespace }}{% endif %}">{{ grandchild.name|e }}</a>
                            {% endif %}
                          {% else %}
                            <a href="#">{{ grandchild.name|e }}</a>
                          {% endif %}
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
    {% endblock %}
  </nav>

  <main class="site-main" role="main">
    {% block content %}
    <p>{{ message|e }}</p>
    {% endblock %}
  </main>

  <footer class="site-footer">
    {% block footer %}
    <p>Â© kobitworks</p>
    {% endblock %}
  </footer>

  <script src="./js/base.js"></script>
  {% block scripts %}{% endblock %}
</body>
</html>
